<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>tesseract: IntegerMatcher Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">tesseract
   &#160;<span id="projectnumber">4.0.0-1-g2a2b</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('a04094.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="a04091.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">IntegerMatcher Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="a00731_source.html">intmatcher.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ac47ab967470039e44725f4cf837cb59e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a04094.html#ac47ab967470039e44725f4cf837cb59e">IntegerMatcher</a> (<a class="el" href="a02802.html">tesseract::IntParam</a> *classify_debug_level)</td></tr>
<tr class="separator:ac47ab967470039e44725f4cf837cb59e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a90b199a0fda9a1d78511394c6aab9f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a04094.html#a4a90b199a0fda9a1d78511394c6aab9f">Match</a> (<a class="el" href="a00737.html#a8db0caa94eaa3f534953ce618f40f7ef">INT_CLASS</a> ClassTemplate, <a class="el" href="a00851.html#a0398107f6abf13eec3958d840d2fcb63">BIT_VECTOR</a> ProtoMask, <a class="el" href="a00851.html#a0398107f6abf13eec3958d840d2fcb63">BIT_VECTOR</a> ConfigMask, int16_t NumFeatures, const <a class="el" href="a04130.html">INT_FEATURE_STRUCT</a> *Features, <a class="el" href="a04202.html">tesseract::UnicharRating</a> *Result, int AdaptFeatureThreshold, int Debug, bool SeparateDebugWindows)</td></tr>
<tr class="separator:a4a90b199a0fda9a1d78511394c6aab9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1a8767e5d65919f16cf65a16bcf512f"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a04094.html#af1a8767e5d65919f16cf65a16bcf512f">ApplyCNCorrection</a> (float rating, int blob_length, int normalization_factor, int matcher_multiplier)</td></tr>
<tr class="separator:af1a8767e5d65919f16cf65a16bcf512f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe07ba276405560d89e789ccc0acf595"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a04094.html#afe07ba276405560d89e789ccc0acf595">FindGoodProtos</a> (<a class="el" href="a00737.html#a8db0caa94eaa3f534953ce618f40f7ef">INT_CLASS</a> ClassTemplate, <a class="el" href="a00851.html#a0398107f6abf13eec3958d840d2fcb63">BIT_VECTOR</a> ProtoMask, <a class="el" href="a00851.html#a0398107f6abf13eec3958d840d2fcb63">BIT_VECTOR</a> ConfigMask, uint16_t BlobLength, int16_t NumFeatures, <a class="el" href="a00737.html#a544a6c7d78d215e9a4da202daecfeb52">INT_FEATURE_ARRAY</a> Features, <a class="el" href="a00914.html#a7e3352f12ad03d1c7939d3e3d078930d">PROTO_ID</a> *ProtoArray, int AdaptProtoThreshold, int Debug)</td></tr>
<tr class="separator:afe07ba276405560d89e789ccc0acf595"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae612c9d17709ae3833888bbeaa4cb7cf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a04094.html#ae612c9d17709ae3833888bbeaa4cb7cf">FindBadFeatures</a> (<a class="el" href="a00737.html#a8db0caa94eaa3f534953ce618f40f7ef">INT_CLASS</a> ClassTemplate, <a class="el" href="a00851.html#a0398107f6abf13eec3958d840d2fcb63">BIT_VECTOR</a> ProtoMask, <a class="el" href="a00851.html#a0398107f6abf13eec3958d840d2fcb63">BIT_VECTOR</a> ConfigMask, uint16_t BlobLength, int16_t NumFeatures, <a class="el" href="a00737.html#a544a6c7d78d215e9a4da202daecfeb52">INT_FEATURE_ARRAY</a> Features, <a class="el" href="a00914.html#ab791f7bc36db57f6872c1e98367a5e61">FEATURE_ID</a> *FeatureArray, int AdaptFeatureThreshold, int Debug)</td></tr>
<tr class="separator:ae612c9d17709ae3833888bbeaa4cb7cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:a88c2bf2659e8f9b3a8fb7de3e20b4586"><td class="memItemLeft" align="right" valign="top">static const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a04094.html#a88c2bf2659e8f9b3a8fb7de3e20b4586">kIntThetaFudge</a> = 128</td></tr>
<tr class="separator:a88c2bf2659e8f9b3a8fb7de3e20b4586"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a405d8797e28cafc6be50dd522d191031"><td class="memItemLeft" align="right" valign="top">static const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a04094.html#a405d8797e28cafc6be50dd522d191031">kEvidenceTableBits</a> = 9</td></tr>
<tr class="separator:a405d8797e28cafc6be50dd522d191031"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95f9b8220f07f5c258880fa2be8eeb48"><td class="memItemLeft" align="right" valign="top">static const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a04094.html#a95f9b8220f07f5c258880fa2be8eeb48">kIntEvidenceTruncBits</a> = 14</td></tr>
<tr class="separator:a95f9b8220f07f5c258880fa2be8eeb48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0187390be551f5e22adea437562a26c0"><td class="memItemLeft" align="right" valign="top">static const float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a04094.html#a0187390be551f5e22adea437562a26c0">kSEExponentialMultiplier</a> = 0.0</td></tr>
<tr class="separator:a0187390be551f5e22adea437562a26c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf4850c047b5221fedbaeef45bffa208"><td class="memItemLeft" align="right" valign="top">static const float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a04094.html#abf4850c047b5221fedbaeef45bffa208">kSimilarityCenter</a> = 0.0075</td></tr>
<tr class="separator:abf4850c047b5221fedbaeef45bffa208"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="a00731_source.html#l00083">83</a> of file <a class="el" href="a00731_source.html">intmatcher.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ac47ab967470039e44725f4cf837cb59e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac47ab967470039e44725f4cf837cb59e">&#9670;&nbsp;</a></span>IntegerMatcher()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">IntegerMatcher::IntegerMatcher </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a02802.html">tesseract::IntParam</a> *&#160;</td>
          <td class="paramname"><em>classify_debug_level</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="a00728_source.html#l00670">670</a> of file <a class="el" href="a00728_source.html">intmatcher.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;  : classify_debug_level_(classify_debug_level)</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;{</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;  <span class="comment">/* Initialize table for evidence to similarity lookup */</span></div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="a00731.html#a1a81f6021dc96b06bb0683c605b77a1b">SE_TABLE_SIZE</a>; i++) {</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    uint32_t IntSimilarity = i &lt;&lt; (27 - <a class="code" href="a00731.html#a3698359e38298fe5dce86d20443acd3f">SE_TABLE_BITS</a>);</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    <span class="keywordtype">double</span> Similarity = ((double) IntSimilarity) / 65536.0 / 65536.0;</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    <span class="keywordtype">double</span> evidence = Similarity / <a class="code" href="a04094.html#abf4850c047b5221fedbaeef45bffa208">kSimilarityCenter</a>;</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    evidence = 255.0 / (evidence * evidence + 1.0);</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="a04094.html#a0187390be551f5e22adea437562a26c0">kSEExponentialMultiplier</a> &gt; 0.0) {</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;      <span class="keywordtype">double</span> scale = 1.0 - exp(-<a class="code" href="a04094.html#a0187390be551f5e22adea437562a26c0">kSEExponentialMultiplier</a>) *</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;        exp(<a class="code" href="a04094.html#a0187390be551f5e22adea437562a26c0">kSEExponentialMultiplier</a> * ((<span class="keywordtype">double</span>) i / <a class="code" href="a00731.html#a1a81f6021dc96b06bb0683c605b77a1b">SE_TABLE_SIZE</a>));</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;      evidence *= <a class="code" href="a00527.html#af8739168d5b3235996eeb25dac3c4044">ClipToRange</a>(scale, 0.0, 1.0);</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    }</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    similarity_evidence_table_[i] = (uint8_t) (evidence + 0.5);</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;  }</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;  <span class="comment">/* Initialize evidence computation variables */</span></div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;  evidence_table_mask_ =</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    ((1 &lt;&lt; <a class="code" href="a04094.html#a405d8797e28cafc6be50dd522d191031">kEvidenceTableBits</a>) - 1) &lt;&lt; (9 - <a class="code" href="a04094.html#a405d8797e28cafc6be50dd522d191031">kEvidenceTableBits</a>);</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;  mult_trunc_shift_bits_ = (14 - <a class="code" href="a04094.html#a95f9b8220f07f5c258880fa2be8eeb48">kIntEvidenceTruncBits</a>);</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;  table_trunc_shift_bits_ = (27 - <a class="code" href="a00731.html#a3698359e38298fe5dce86d20443acd3f">SE_TABLE_BITS</a> - (mult_trunc_shift_bits_ &lt;&lt; 1));</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;  evidence_mult_mask_ = ((1 &lt;&lt; <a class="code" href="a04094.html#a95f9b8220f07f5c258880fa2be8eeb48">kIntEvidenceTruncBits</a>) - 1);</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;}</div><div class="ttc" id="a04094_html_a0187390be551f5e22adea437562a26c0"><div class="ttname"><a href="a04094.html#a0187390be551f5e22adea437562a26c0">IntegerMatcher::kSEExponentialMultiplier</a></div><div class="ttdeci">static const float kSEExponentialMultiplier</div><div class="ttdef"><b>Definition:</b> <a href="a00731_source.html#l00092">intmatcher.h:92</a></div></div>
<div class="ttc" id="a04094_html_a95f9b8220f07f5c258880fa2be8eeb48"><div class="ttname"><a href="a04094.html#a95f9b8220f07f5c258880fa2be8eeb48">IntegerMatcher::kIntEvidenceTruncBits</a></div><div class="ttdeci">static const int kIntEvidenceTruncBits</div><div class="ttdef"><b>Definition:</b> <a href="a00731_source.html#l00090">intmatcher.h:90</a></div></div>
<div class="ttc" id="a00731_html_a1a81f6021dc96b06bb0683c605b77a1b"><div class="ttname"><a href="a00731.html#a1a81f6021dc96b06bb0683c605b77a1b">SE_TABLE_SIZE</a></div><div class="ttdeci">#define SE_TABLE_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="a00731_source.html#l00067">intmatcher.h:67</a></div></div>
<div class="ttc" id="a04094_html_abf4850c047b5221fedbaeef45bffa208"><div class="ttname"><a href="a04094.html#abf4850c047b5221fedbaeef45bffa208">IntegerMatcher::kSimilarityCenter</a></div><div class="ttdeci">static const float kSimilarityCenter</div><div class="ttdef"><b>Definition:</b> <a href="a00731_source.html#l00094">intmatcher.h:94</a></div></div>
<div class="ttc" id="a04094_html_a405d8797e28cafc6be50dd522d191031"><div class="ttname"><a href="a04094.html#a405d8797e28cafc6be50dd522d191031">IntegerMatcher::kEvidenceTableBits</a></div><div class="ttdeci">static const int kEvidenceTableBits</div><div class="ttdef"><b>Definition:</b> <a href="a00731_source.html#l00088">intmatcher.h:88</a></div></div>
<div class="ttc" id="a00731_html_a3698359e38298fe5dce86d20443acd3f"><div class="ttname"><a href="a00731.html#a3698359e38298fe5dce86d20443acd3f">SE_TABLE_BITS</a></div><div class="ttdeci">#define SE_TABLE_BITS</div><div class="ttdef"><b>Definition:</b> <a href="a00731_source.html#l00066">intmatcher.h:66</a></div></div>
<div class="ttc" id="a00527_html_af8739168d5b3235996eeb25dac3c4044"><div class="ttname"><a href="a00527.html#af8739168d5b3235996eeb25dac3c4044">ClipToRange</a></div><div class="ttdeci">T ClipToRange(const T &amp;x, const T &amp;lower_bound, const T &amp;upper_bound)</div><div class="ttdef"><b>Definition:</b> <a href="a00527_source.html#l00111">helpers.h:111</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="af1a8767e5d65919f16cf65a16bcf512f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1a8767e5d65919f16cf65a16bcf512f">&#9670;&nbsp;</a></span>ApplyCNCorrection()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float IntegerMatcher::ApplyCNCorrection </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>rating</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>blob_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>normalization_factor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>matcher_multiplier</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Applies the CN normalization factor to the given rating and returns the modified rating. </p>

<p class="definition">Definition at line <a class="el" href="a00728_source.html#l01195">1195</a> of file <a class="el" href="a00728_source.html">intmatcher.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;                                                                {</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;  <span class="keywordflow">return</span> (rating * blob_length +</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;          matcher_multiplier * normalization_factor / 256.0) /</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;      (blob_length + matcher_multiplier);</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="ae612c9d17709ae3833888bbeaa4cb7cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae612c9d17709ae3833888bbeaa4cb7cf">&#9670;&nbsp;</a></span>FindBadFeatures()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int IntegerMatcher::FindBadFeatures </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00737.html#a8db0caa94eaa3f534953ce618f40f7ef">INT_CLASS</a>&#160;</td>
          <td class="paramname"><em>ClassTemplate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00851.html#a0398107f6abf13eec3958d840d2fcb63">BIT_VECTOR</a>&#160;</td>
          <td class="paramname"><em>ProtoMask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00851.html#a0398107f6abf13eec3958d840d2fcb63">BIT_VECTOR</a>&#160;</td>
          <td class="paramname"><em>ConfigMask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>BlobLength</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>NumFeatures</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00737.html#a544a6c7d78d215e9a4da202daecfeb52">INT_FEATURE_ARRAY</a>&#160;</td>
          <td class="paramname"><em>Features</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00914.html#ab791f7bc36db57f6872c1e98367a5e61">FEATURE_ID</a> *&#160;</td>
          <td class="paramname"><em>FeatureArray</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>AdaptFeatureThreshold</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>Debug</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>FindBadFeatures finds all features with maximum feature-evidence &lt; AdaptFeatureThresh. The list is ordered by increasing feature number. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ClassTemplate</td><td>Prototypes &amp; tables for a class </td></tr>
    <tr><td class="paramname">ProtoMask</td><td>AND Mask for proto word </td></tr>
    <tr><td class="paramname">ConfigMask</td><td>AND Mask for config word </td></tr>
    <tr><td class="paramname">BlobLength</td><td>Length of unormalized blob </td></tr>
    <tr><td class="paramname">NumFeatures</td><td>Number of features in blob </td></tr>
    <tr><td class="paramname">Features</td><td>Array of features </td></tr>
    <tr><td class="paramname">FeatureArray</td><td>Array of bad features </td></tr>
    <tr><td class="paramname">AdaptFeatureThreshold</td><td>Threshold for bad features </td></tr>
    <tr><td class="paramname">Debug</td><td>Debugger flag: 1=debugger on </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Number of bad features in FeatureArray. </dd></dl>

<p class="definition">Definition at line <a class="el" href="a00728_source.html#l00618">618</a> of file <a class="el" href="a00728_source.html">intmatcher.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;               {</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;  <a class="code" href="a04090.html">ScratchEvidence</a> *tables = <span class="keyword">new</span> <a class="code" href="a04090.html">ScratchEvidence</a>();</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;  <span class="keywordtype">int</span> NumBadFeatures = 0;</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;  <span class="comment">/* DEBUG opening heading */</span></div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="a00737.html#a1cd342e35493343c79e4c24d9070a803">MatchDebuggingOn</a>(Debug))</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    <a class="code" href="a00854.html#a21679e7fec2d69db23107348fa13c153">cprintf</a>(<span class="stringliteral">&quot;Find Bad Features -------------------------------------------\n&quot;</span>);</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;  tables-&gt;<a class="code" href="a04090.html#a2c13d9e0b848687d31343e91e7084814">Clear</a>(ClassTemplate);</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> Feature = 0; Feature &lt; NumFeatures; Feature++) {</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    UpdateTablesForFeature(</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;        ClassTemplate, ProtoMask, ConfigMask, Feature, &amp;Features[Feature],</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;        tables, Debug);</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    <span class="comment">/* Find Best Evidence for Current Feature */</span></div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    <span class="keywordtype">int</span> best = 0;</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; ClassTemplate-&gt;<a class="code" href="a04122.html#af2161017923d554d36188e361089c59a">NumConfigs</a>; i++)</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;      <span class="keywordflow">if</span> (tables-&gt;<a class="code" href="a04090.html#ac8bdb5b2bf07bbe09bcc77e9b87d2884">feature_evidence_</a>[i] &gt; best)</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;        best = tables-&gt;<a class="code" href="a04090.html#ac8bdb5b2bf07bbe09bcc77e9b87d2884">feature_evidence_</a>[i];</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    <span class="comment">/* Find Bad Features */</span></div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    <span class="keywordflow">if</span> (best &lt; AdaptFeatureThreshold) {</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;      *FeatureArray = Feature;</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;      FeatureArray++;</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;      NumBadFeatures++;</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    }</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;  }</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;<span class="preprocessor">#ifndef GRAPHICS_DISABLED</span></div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="a00737.html#af9768c71d08cded9ee3736a16fc53a79">PrintProtoMatchesOn</a>(Debug) || <a class="code" href="a00737.html#a58f7baca07428ed3a374eba467ae560f">PrintMatchSummaryOn</a>(Debug))</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    DebugFeatureProtoError(ClassTemplate, ProtoMask, ConfigMask, *tables,</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;                           NumFeatures, Debug);</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="a00737.html#a1cd342e35493343c79e4c24d9070a803">MatchDebuggingOn</a>(Debug))</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    <a class="code" href="a00854.html#a21679e7fec2d69db23107348fa13c153">cprintf</a>(<span class="stringliteral">&quot;Match Complete --------------------------------------------\n&quot;</span>);</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;  <span class="keyword">delete</span> tables;</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;  <span class="keywordflow">return</span> NumBadFeatures;</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;}</div><div class="ttc" id="a00854_html_a21679e7fec2d69db23107348fa13c153"><div class="ttname"><a href="a00854.html#a21679e7fec2d69db23107348fa13c153">cprintf</a></div><div class="ttdeci">void cprintf(const char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="a00854_source.html#l00033">callcpp.cpp:33</a></div></div>
<div class="ttc" id="a00737_html_a1cd342e35493343c79e4c24d9070a803"><div class="ttname"><a href="a00737.html#a1cd342e35493343c79e4c24d9070a803">MatchDebuggingOn</a></div><div class="ttdeci">#define MatchDebuggingOn(D)</div><div class="ttdef"><b>Definition:</b> <a href="a00737_source.html#l00193">intproto.h:193</a></div></div>
<div class="ttc" id="a04122_html_af2161017923d554d36188e361089c59a"><div class="ttname"><a href="a04122.html#af2161017923d554d36188e361089c59a">INT_CLASS_STRUCT::NumConfigs</a></div><div class="ttdeci">uint8_t NumConfigs</div><div class="ttdef"><b>Definition:</b> <a href="a00737_source.html#l00108">intproto.h:108</a></div></div>
<div class="ttc" id="a04090_html_a2c13d9e0b848687d31343e91e7084814"><div class="ttname"><a href="a04090.html#a2c13d9e0b848687d31343e91e7084814">ScratchEvidence::Clear</a></div><div class="ttdeci">void Clear(const INT_CLASS class_template)</div><div class="ttdef"><b>Definition:</b> <a href="a00728_source.html#l00700">intmatcher.cpp:700</a></div></div>
<div class="ttc" id="a04090_html"><div class="ttname"><a href="a04090.html">ScratchEvidence</a></div><div class="ttdef"><b>Definition:</b> <a href="a00731_source.html#l00069">intmatcher.h:69</a></div></div>
<div class="ttc" id="a00737_html_a58f7baca07428ed3a374eba467ae560f"><div class="ttname"><a href="a00737.html#a58f7baca07428ed3a374eba467ae560f">PrintMatchSummaryOn</a></div><div class="ttdeci">#define PrintMatchSummaryOn(D)</div><div class="ttdef"><b>Definition:</b> <a href="a00737_source.html#l00194">intproto.h:194</a></div></div>
<div class="ttc" id="a04090_html_ac8bdb5b2bf07bbe09bcc77e9b87d2884"><div class="ttname"><a href="a04090.html#ac8bdb5b2bf07bbe09bcc77e9b87d2884">ScratchEvidence::feature_evidence_</a></div><div class="ttdeci">uint8_t feature_evidence_[MAX_NUM_CONFIGS]</div><div class="ttdef"><b>Definition:</b> <a href="a00731_source.html#l00070">intmatcher.h:70</a></div></div>
<div class="ttc" id="a00737_html_af9768c71d08cded9ee3736a16fc53a79"><div class="ttname"><a href="a00737.html#af9768c71d08cded9ee3736a16fc53a79">PrintProtoMatchesOn</a></div><div class="ttdeci">#define PrintProtoMatchesOn(D)</div><div class="ttdef"><b>Definition:</b> <a href="a00737_source.html#l00198">intproto.h:198</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afe07ba276405560d89e789ccc0acf595"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe07ba276405560d89e789ccc0acf595">&#9670;&nbsp;</a></span>FindGoodProtos()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int IntegerMatcher::FindGoodProtos </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00737.html#a8db0caa94eaa3f534953ce618f40f7ef">INT_CLASS</a>&#160;</td>
          <td class="paramname"><em>ClassTemplate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00851.html#a0398107f6abf13eec3958d840d2fcb63">BIT_VECTOR</a>&#160;</td>
          <td class="paramname"><em>ProtoMask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00851.html#a0398107f6abf13eec3958d840d2fcb63">BIT_VECTOR</a>&#160;</td>
          <td class="paramname"><em>ConfigMask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>BlobLength</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>NumFeatures</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00737.html#a544a6c7d78d215e9a4da202daecfeb52">INT_FEATURE_ARRAY</a>&#160;</td>
          <td class="paramname"><em>Features</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00914.html#a7e3352f12ad03d1c7939d3e3d078930d">PROTO_ID</a> *&#160;</td>
          <td class="paramname"><em>ProtoArray</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>AdaptProtoThreshold</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>Debug</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>FindGoodProtos finds all protos whose normalized proto-evidence exceed classify_adapt_proto_thresh. The list is ordered by increasing proto id number.</p>
<p>Globals:</p><ul>
<li>local_matcher_multiplier_ Normalization factor multiplier param ClassTemplate Prototypes &amp; tables for a class param ProtoMask AND Mask for proto word param ConfigMask AND Mask for config word param BlobLength Length of unormalized blob param NumFeatures Number of features in blob param Features Array of features param ProtoArray Array of good protos param AdaptProtoThreshold Threshold for good protos param Debug Debugger flag: 1=debugger on <dl class="section return"><dt>Returns</dt><dd>Number of good protos in ProtoArray. </dd></dl>
</li>
</ul>

<p class="definition">Definition at line <a class="el" href="a00728_source.html#l00549">549</a> of file <a class="el" href="a00728_source.html">intmatcher.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;               {</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;  <a class="code" href="a04090.html">ScratchEvidence</a> *tables = <span class="keyword">new</span> <a class="code" href="a04090.html">ScratchEvidence</a>();</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;  <span class="keywordtype">int</span> NumGoodProtos = 0;</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;  <span class="comment">/* DEBUG opening heading */</span></div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="a00737.html#a1cd342e35493343c79e4c24d9070a803">MatchDebuggingOn</a> (Debug))</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <a class="code" href="a00854.html#a21679e7fec2d69db23107348fa13c153">cprintf</a></div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;      (<span class="stringliteral">&quot;Find Good Protos -------------------------------------------\n&quot;</span>);</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;  tables-&gt;<a class="code" href="a04090.html#a2c13d9e0b848687d31343e91e7084814">Clear</a>(ClassTemplate);</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> Feature = 0; Feature &lt; NumFeatures; Feature++)</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    UpdateTablesForFeature(</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;        ClassTemplate, ProtoMask, ConfigMask, Feature, &amp;(Features[Feature]),</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;        tables, Debug);</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;<span class="preprocessor">#ifndef GRAPHICS_DISABLED</span></div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="a00737.html#af9768c71d08cded9ee3736a16fc53a79">PrintProtoMatchesOn</a> (Debug) || <a class="code" href="a00737.html#a58f7baca07428ed3a374eba467ae560f">PrintMatchSummaryOn</a> (Debug))</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    DebugFeatureProtoError(ClassTemplate, ProtoMask, ConfigMask, *tables,</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;                           NumFeatures, Debug);</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;  <span class="comment">/* Average Proto Evidences &amp; Find Good Protos */</span></div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> proto = 0; proto &lt; ClassTemplate-&gt;<a class="code" href="a04122.html#a8f823af26d99bba28ff14c07f0916c56">NumProtos</a>; proto++) {</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    <span class="comment">/* Compute Average for Actual Proto */</span></div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    <span class="keywordtype">int</span> Temp = 0;</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; ClassTemplate-&gt;<a class="code" href="a04122.html#ab0202389adecfa45e744d49597472c7b">ProtoLengths</a>[proto]; i++)</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;      Temp += tables-&gt;<a class="code" href="a04090.html#ae3f39039fbb9bc4e0b7722919d320ccd">proto_evidence_</a>[proto][i];</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    Temp /= ClassTemplate-&gt;<a class="code" href="a04122.html#ab0202389adecfa45e744d49597472c7b">ProtoLengths</a>[proto];</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    <span class="comment">/* Find Good Protos */</span></div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    if (Temp &gt;= AdaptProtoThreshold) {</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;      *ProtoArray = proto;</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;      ProtoArray++;</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;      NumGoodProtos++;</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    }</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;  }</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="a00737.html#a1cd342e35493343c79e4c24d9070a803">MatchDebuggingOn</a> (Debug))</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    <a class="code" href="a00854.html#a21679e7fec2d69db23107348fa13c153">cprintf</a> (<span class="stringliteral">&quot;Match Complete --------------------------------------------\n&quot;</span>);</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;  <span class="keyword">delete</span> tables;</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;  <span class="keywordflow">return</span> NumGoodProtos;</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;}</div><div class="ttc" id="a00854_html_a21679e7fec2d69db23107348fa13c153"><div class="ttname"><a href="a00854.html#a21679e7fec2d69db23107348fa13c153">cprintf</a></div><div class="ttdeci">void cprintf(const char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="a00854_source.html#l00033">callcpp.cpp:33</a></div></div>
<div class="ttc" id="a00737_html_a1cd342e35493343c79e4c24d9070a803"><div class="ttname"><a href="a00737.html#a1cd342e35493343c79e4c24d9070a803">MatchDebuggingOn</a></div><div class="ttdeci">#define MatchDebuggingOn(D)</div><div class="ttdef"><b>Definition:</b> <a href="a00737_source.html#l00193">intproto.h:193</a></div></div>
<div class="ttc" id="a04122_html_ab0202389adecfa45e744d49597472c7b"><div class="ttname"><a href="a04122.html#ab0202389adecfa45e744d49597472c7b">INT_CLASS_STRUCT::ProtoLengths</a></div><div class="ttdeci">uint8_t * ProtoLengths</div><div class="ttdef"><b>Definition:</b> <a href="a00737_source.html#l00110">intproto.h:110</a></div></div>
<div class="ttc" id="a04090_html_a2c13d9e0b848687d31343e91e7084814"><div class="ttname"><a href="a04090.html#a2c13d9e0b848687d31343e91e7084814">ScratchEvidence::Clear</a></div><div class="ttdeci">void Clear(const INT_CLASS class_template)</div><div class="ttdef"><b>Definition:</b> <a href="a00728_source.html#l00700">intmatcher.cpp:700</a></div></div>
<div class="ttc" id="a04090_html"><div class="ttname"><a href="a04090.html">ScratchEvidence</a></div><div class="ttdef"><b>Definition:</b> <a href="a00731_source.html#l00069">intmatcher.h:69</a></div></div>
<div class="ttc" id="a00737_html_a58f7baca07428ed3a374eba467ae560f"><div class="ttname"><a href="a00737.html#a58f7baca07428ed3a374eba467ae560f">PrintMatchSummaryOn</a></div><div class="ttdeci">#define PrintMatchSummaryOn(D)</div><div class="ttdef"><b>Definition:</b> <a href="a00737_source.html#l00194">intproto.h:194</a></div></div>
<div class="ttc" id="a04122_html_a8f823af26d99bba28ff14c07f0916c56"><div class="ttname"><a href="a04122.html#a8f823af26d99bba28ff14c07f0916c56">INT_CLASS_STRUCT::NumProtos</a></div><div class="ttdeci">uint16_t NumProtos</div><div class="ttdef"><b>Definition:</b> <a href="a00737_source.html#l00106">intproto.h:106</a></div></div>
<div class="ttc" id="a00737_html_af9768c71d08cded9ee3736a16fc53a79"><div class="ttname"><a href="a00737.html#af9768c71d08cded9ee3736a16fc53a79">PrintProtoMatchesOn</a></div><div class="ttdeci">#define PrintProtoMatchesOn(D)</div><div class="ttdef"><b>Definition:</b> <a href="a00737_source.html#l00198">intproto.h:198</a></div></div>
<div class="ttc" id="a04090_html_ae3f39039fbb9bc4e0b7722919d320ccd"><div class="ttname"><a href="a04090.html#ae3f39039fbb9bc4e0b7722919d320ccd">ScratchEvidence::proto_evidence_</a></div><div class="ttdeci">uint8_t proto_evidence_[MAX_NUM_PROTOS][MAX_PROTO_INDEX]</div><div class="ttdef"><b>Definition:</b> <a href="a00731_source.html#l00072">intmatcher.h:72</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4a90b199a0fda9a1d78511394c6aab9f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a90b199a0fda9a1d78511394c6aab9f">&#9670;&nbsp;</a></span>Match()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void IntegerMatcher::Match </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00737.html#a8db0caa94eaa3f534953ce618f40f7ef">INT_CLASS</a>&#160;</td>
          <td class="paramname"><em>ClassTemplate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00851.html#a0398107f6abf13eec3958d840d2fcb63">BIT_VECTOR</a>&#160;</td>
          <td class="paramname"><em>ProtoMask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00851.html#a0398107f6abf13eec3958d840d2fcb63">BIT_VECTOR</a>&#160;</td>
          <td class="paramname"><em>ConfigMask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>NumFeatures</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="a04130.html">INT_FEATURE_STRUCT</a> *&#160;</td>
          <td class="paramname"><em>Features</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a04202.html">tesseract::UnicharRating</a> *&#160;</td>
          <td class="paramname"><em>Result</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>AdaptFeatureThreshold</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>Debug</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>SeparateDebugWindows</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="a04094.html">IntegerMatcher</a> returns the best configuration and rating for a single class. The class matched against is determined by the uniqueness of the ClassTemplate parameter. The best rating and its associated configuration are returned.</p>
<p>Globals:</p><ul>
<li>local_matcher_multiplier_ Normalization factor multiplier param ClassTemplate Prototypes &amp; tables for a class param BlobLength Length of unormalized blob param NumFeatures Number of features in blob param Features Array of features param NormalizationFactor Fudge factor from blob normalization process param Result Class rating &amp; configuration: (0.0 -&gt; 1.0), 0=bad, 1=good param Debug Debugger flag: 1=debugger on <dl class="section return"><dt>Returns</dt><dd>none </dd></dl>
</li>
</ul>

<p class="definition">Definition at line <a class="el" href="a00728_source.html#l00470">470</a> of file <a class="el" href="a00728_source.html">intmatcher.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;                                                      {</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;  <a class="code" href="a04090.html">ScratchEvidence</a> *tables = <span class="keyword">new</span> <a class="code" href="a04090.html">ScratchEvidence</a>();</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;  <span class="keywordtype">int</span> Feature;</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="a00737.html#a1cd342e35493343c79e4c24d9070a803">MatchDebuggingOn</a> (Debug))</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <a class="code" href="a00854.html#a21679e7fec2d69db23107348fa13c153">cprintf</a> (<span class="stringliteral">&quot;Integer Matcher -------------------------------------------\n&quot;</span>);</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;  tables-&gt;<a class="code" href="a04090.html#a2c13d9e0b848687d31343e91e7084814">Clear</a>(ClassTemplate);</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;  Result-&gt;<a class="code" href="a04202.html#ad324fac54187cd8b4480dccc43cac4c4">feature_misses</a> = 0;</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;  <span class="keywordflow">for</span> (Feature = 0; Feature &lt; NumFeatures; Feature++) {</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    <span class="keywordtype">int</span> csum = UpdateTablesForFeature(ClassTemplate, ProtoMask, ConfigMask,</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;                                      Feature, &amp;Features[Feature],</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;                                      tables, Debug);</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    <span class="comment">// Count features that were missed over all configs.</span></div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    <span class="keywordflow">if</span> (csum == 0)</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;      ++Result-&gt;<a class="code" href="a04202.html#ad324fac54187cd8b4480dccc43cac4c4">feature_misses</a>;</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;  }</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;<span class="preprocessor">#ifndef GRAPHICS_DISABLED</span></div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="a00737.html#af9768c71d08cded9ee3736a16fc53a79">PrintProtoMatchesOn</a>(Debug) || <a class="code" href="a00737.html#a58f7baca07428ed3a374eba467ae560f">PrintMatchSummaryOn</a>(Debug)) {</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    DebugFeatureProtoError(ClassTemplate, ProtoMask, ConfigMask, *tables,</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;                           NumFeatures, Debug);</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  }</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="a00737.html#aa1c8fa966c1445530f5db86ffce6761f">DisplayProtoMatchesOn</a>(Debug)) {</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    DisplayProtoDebugInfo(ClassTemplate, ProtoMask, ConfigMask,</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;                          *tables, SeparateDebugWindows);</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;  }</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="a00737.html#a7f6ae528a53c6ccea8213540d348aed5">DisplayFeatureMatchesOn</a>(Debug)) {</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    DisplayFeatureDebugInfo(ClassTemplate, ProtoMask, ConfigMask, NumFeatures,</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;                            Features, AdaptFeatureThreshold, Debug,</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;                            SeparateDebugWindows);</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;  }</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  tables-&gt;<a class="code" href="a04090.html#ae5bb4e91cf70f22121f60f067822111a">UpdateSumOfProtoEvidences</a>(ClassTemplate, ConfigMask, NumFeatures);</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;  tables-&gt;<a class="code" href="a04090.html#af17a168891e57f0c016d2c61a6770e1e">NormalizeSums</a>(ClassTemplate, NumFeatures, NumFeatures);</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;  FindBestMatch(ClassTemplate, *tables, Result);</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;<span class="preprocessor">#ifndef GRAPHICS_DISABLED</span></div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="a00737.html#a58f7baca07428ed3a374eba467ae560f">PrintMatchSummaryOn</a>(Debug))</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    Result-&gt;<a class="code" href="a04202.html#a26b89daaefe26ca30a5bb507848cd1ea">Print</a>();</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="a00737.html#a1cd342e35493343c79e4c24d9070a803">MatchDebuggingOn</a>(Debug))</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <a class="code" href="a00854.html#a21679e7fec2d69db23107348fa13c153">cprintf</a>(<span class="stringliteral">&quot;Match Complete --------------------------------------------\n&quot;</span>);</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;  <span class="keyword">delete</span> tables;</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;}</div><div class="ttc" id="a04090_html_af17a168891e57f0c016d2c61a6770e1e"><div class="ttname"><a href="a04090.html#af17a168891e57f0c016d2c61a6770e1e">ScratchEvidence::NormalizeSums</a></div><div class="ttdeci">void NormalizeSums(INT_CLASS ClassTemplate, int16_t NumFeatures, int32_t used_features)</div><div class="ttdef"><b>Definition:</b> <a href="a00728_source.html#l01150">intmatcher.cpp:1150</a></div></div>
<div class="ttc" id="a00737_html_aa1c8fa966c1445530f5db86ffce6761f"><div class="ttname"><a href="a00737.html#aa1c8fa966c1445530f5db86ffce6761f">DisplayProtoMatchesOn</a></div><div class="ttdeci">#define DisplayProtoMatchesOn(D)</div><div class="ttdef"><b>Definition:</b> <a href="a00737_source.html#l00196">intproto.h:196</a></div></div>
<div class="ttc" id="a00854_html_a21679e7fec2d69db23107348fa13c153"><div class="ttname"><a href="a00854.html#a21679e7fec2d69db23107348fa13c153">cprintf</a></div><div class="ttdeci">void cprintf(const char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="a00854_source.html#l00033">callcpp.cpp:33</a></div></div>
<div class="ttc" id="a04090_html_ae5bb4e91cf70f22121f60f067822111a"><div class="ttname"><a href="a04090.html#ae5bb4e91cf70f22121f60f067822111a">ScratchEvidence::UpdateSumOfProtoEvidences</a></div><div class="ttdeci">void UpdateSumOfProtoEvidences(INT_CLASS ClassTemplate, BIT_VECTOR ConfigMask, int16_t NumFeatures)</div><div class="ttdef"><b>Definition:</b> <a href="a00728_source.html#l01109">intmatcher.cpp:1109</a></div></div>
<div class="ttc" id="a00737_html_a1cd342e35493343c79e4c24d9070a803"><div class="ttname"><a href="a00737.html#a1cd342e35493343c79e4c24d9070a803">MatchDebuggingOn</a></div><div class="ttdeci">#define MatchDebuggingOn(D)</div><div class="ttdef"><b>Definition:</b> <a href="a00737_source.html#l00193">intproto.h:193</a></div></div>
<div class="ttc" id="a04202_html_ad324fac54187cd8b4480dccc43cac4c4"><div class="ttname"><a href="a04202.html#ad324fac54187cd8b4480dccc43cac4c4">tesseract::UnicharRating::feature_misses</a></div><div class="ttdeci">uint16_t feature_misses</div><div class="ttdef"><b>Definition:</b> <a href="a00827_source.html#l00084">shapetable.h:84</a></div></div>
<div class="ttc" id="a04090_html_a2c13d9e0b848687d31343e91e7084814"><div class="ttname"><a href="a04090.html#a2c13d9e0b848687d31343e91e7084814">ScratchEvidence::Clear</a></div><div class="ttdeci">void Clear(const INT_CLASS class_template)</div><div class="ttdef"><b>Definition:</b> <a href="a00728_source.html#l00700">intmatcher.cpp:700</a></div></div>
<div class="ttc" id="a00737_html_a7f6ae528a53c6ccea8213540d348aed5"><div class="ttname"><a href="a00737.html#a7f6ae528a53c6ccea8213540d348aed5">DisplayFeatureMatchesOn</a></div><div class="ttdeci">#define DisplayFeatureMatchesOn(D)</div><div class="ttdef"><b>Definition:</b> <a href="a00737_source.html#l00195">intproto.h:195</a></div></div>
<div class="ttc" id="a04090_html"><div class="ttname"><a href="a04090.html">ScratchEvidence</a></div><div class="ttdef"><b>Definition:</b> <a href="a00731_source.html#l00069">intmatcher.h:69</a></div></div>
<div class="ttc" id="a00737_html_a58f7baca07428ed3a374eba467ae560f"><div class="ttname"><a href="a00737.html#a58f7baca07428ed3a374eba467ae560f">PrintMatchSummaryOn</a></div><div class="ttdeci">#define PrintMatchSummaryOn(D)</div><div class="ttdef"><b>Definition:</b> <a href="a00737_source.html#l00194">intproto.h:194</a></div></div>
<div class="ttc" id="a00737_html_af9768c71d08cded9ee3736a16fc53a79"><div class="ttname"><a href="a00737.html#af9768c71d08cded9ee3736a16fc53a79">PrintProtoMatchesOn</a></div><div class="ttdeci">#define PrintProtoMatchesOn(D)</div><div class="ttdef"><b>Definition:</b> <a href="a00737_source.html#l00198">intproto.h:198</a></div></div>
<div class="ttc" id="a04202_html_a26b89daaefe26ca30a5bb507848cd1ea"><div class="ttname"><a href="a04202.html#a26b89daaefe26ca30a5bb507848cd1ea">tesseract::UnicharRating::Print</a></div><div class="ttdeci">void Print() const</div><div class="ttdef"><b>Definition:</b> <a href="a00827_source.html#l00049">shapetable.h:49</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a405d8797e28cafc6be50dd522d191031"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a405d8797e28cafc6be50dd522d191031">&#9670;&nbsp;</a></span>kEvidenceTableBits</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const int IntegerMatcher::kEvidenceTableBits = 9</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="a00731_source.html#l00088">88</a> of file <a class="el" href="a00731_source.html">intmatcher.h</a>.</p>

</div>
</div>
<a id="a95f9b8220f07f5c258880fa2be8eeb48"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95f9b8220f07f5c258880fa2be8eeb48">&#9670;&nbsp;</a></span>kIntEvidenceTruncBits</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const int IntegerMatcher::kIntEvidenceTruncBits = 14</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="a00731_source.html#l00090">90</a> of file <a class="el" href="a00731_source.html">intmatcher.h</a>.</p>

</div>
</div>
<a id="a88c2bf2659e8f9b3a8fb7de3e20b4586"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88c2bf2659e8f9b3a8fb7de3e20b4586">&#9670;&nbsp;</a></span>kIntThetaFudge</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const int IntegerMatcher::kIntThetaFudge = 128</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="a00731_source.html#l00086">86</a> of file <a class="el" href="a00731_source.html">intmatcher.h</a>.</p>

</div>
</div>
<a id="a0187390be551f5e22adea437562a26c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0187390be551f5e22adea437562a26c0">&#9670;&nbsp;</a></span>kSEExponentialMultiplier</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const float IntegerMatcher::kSEExponentialMultiplier = 0.0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="a00731_source.html#l00092">92</a> of file <a class="el" href="a00731_source.html">intmatcher.h</a>.</p>

</div>
</div>
<a id="abf4850c047b5221fedbaeef45bffa208"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf4850c047b5221fedbaeef45bffa208">&#9670;&nbsp;</a></span>kSimilarityCenter</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const float IntegerMatcher::kSimilarityCenter = 0.0075</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="a00731_source.html#l00094">94</a> of file <a class="el" href="a00731_source.html">intmatcher.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/usr/src/tesseract-ocr.master/src/classify/<a class="el" href="a00731_source.html">intmatcher.h</a></li>
<li>/usr/src/tesseract-ocr.master/src/classify/<a class="el" href="a00728_source.html">intmatcher.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="a04094.html">IntegerMatcher</a></li>
    <li class="footer">Generated on Mon Oct 29 2018 11:03:59 for tesseract by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
